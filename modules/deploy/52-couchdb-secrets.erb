<% require 'base64' %>
apiVersion: v1
kind: Secret
metadata:
  namespace: gpii
  name: couchdb-secrets
type: Opaque
data:
  user: <%= Base64.strict_encode64(@secrets["couchdb_user"]) %>
  password: <%= Base64.strict_encode64(@secrets["couchdb_password"]) %>
  erlang_cookie: <%= Base64.strict_encode64(@secrets["erlang_cookie"]) %>
  dataloader_couchdb_url: <%= Base64.strict_encode64("http://#{@secrets["couchdb_user"]}:#{@secrets["couchdb_password"]}@couchdb-lb.gpii.svc.cluster.local:5984/gpii") %>
  preferences_datasource_url: <%= Base64.strict_encode64("http://#{@secrets["couchdb_user"]}:#{@secrets["couchdb_password"]}@couchdb-lb.gpii.svc.cluster.local:5984/preferences/%userToken") %>
  flowmanager_datasource_hostname: <%= Base64.strict_encode64("http://#{@secrets["couchdb_user"]}:#{@secrets["couchdb_password"]}@couchdb-lb.gpii.svc.cluster.local") %>
